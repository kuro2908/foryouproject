<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Story Flowchart Viewer</title>
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <link rel="stylesheet" href="index.css">
    <style>
        body {
            font-family: sans-serif;
        }

        #cy {
            width: 90vw;
            height: 80vh;
            border: 1px solid #ccc;
            margin: 20px auto;
        }

        h1 {
            text-align: center;
        }
    </style>
</head>

<body>
    <!-- Navigation Bar for all pages -->
    <section class="nav-bar">
        <a href="index.html" class="nav-link" title="Home">
            <!-- Home Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" height="20" width="21">
                <path
                    d="M18.9999 6.01002L12.4499 0.770018C11.1699 -0.249982 9.16988 -0.259982 7.89988 0.760018L1.34988 6.01002C0.409885 6.76002 -0.160115 8.26002 0.0398848 9.44002L1.29988 16.98C1.58988 18.67 3.15988 20 4.86988 20H15.4699C17.1599 20 18.7599 18.64 19.0499 16.97L20.3099 9.43002C20.4899 8.26002 19.9199 6.76002 18.9999 6.01002ZM10.9199 16C10.9199 16.41 10.5799 16.75 10.1699 16.75C9.75988 16.75 9.41988 16.41 9.41988 16V13C9.41988 12.59 9.75988 12.25 10.1699 12.25C10.5799 12.25 10.9199 12.59 10.9199 13V16Z">
                </path>
            </svg>
        </a>
        <a href="story.html" class="nav-link" title="Story">
            <!-- Book Icon for Story -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="20" width="20">
                <path fill="currentColor"
                    d="M19 2H7C5.9 2 5 2.9 5 4v16a2 2 0 002 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2Zm0 18H7V4h12v16ZM3 6h2v2H3V6Zm0 4h2v2H3v-2Zm0 4h2v2H3v-2Zm0 4h2v2H3v-2Z" />
            </svg>
        </a>
        <a href="kanban.html" class="nav-link" title="Kanban">
            <!-- Kanban Board Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="20" width="20">
                <rect x="3" y="5" width="4" height="14" rx="1" fill="currentColor" />
                <rect x="10" y="5" width="4" height="9" rx="1" fill="currentColor" />
                <rect x="17" y="5" width="4" height="4" rx="1" fill="currentColor" />
            </svg>
        </a>
        <a href="flowchart.html" class="nav-link active" title="Flowchart">
            <!-- Flowchart/Nodes Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="20" width="20">
                <circle cx="5" cy="12" r="3" fill="currentColor" />
                <circle cx="19" cy="5" r="3" fill="currentColor" />
                <circle cx="19" cy="19" r="3" fill="currentColor" />
                <path d="M7.59 10.51l3.92-2.26M7.59 13.49l3.92 2.26" stroke="currentColor" stroke-width="2"
                    fill="none" />
                <path d="M14.5 7.77v8.46" stroke="currentColor" stroke-width="2" fill="none" />
            </svg>
        </a>
    </section>

    <h1>Story Flowchart</h1>
    <div id="cy"></div>
    <script>
        fetch('data/flowchart-data.json')
            .then(res => res.json())
            .then(data => {
                const elements = [
                    ...data.nodes.map(n => ({ data: { id: n.id, label: n.label } })),
                    ...data.edges.map(e => ({ data: { source: e.source, target: e.target } }))
                ];
                cytoscape({
                    container: document.getElementById('cy'),
                    elements: elements,
                    style: [
                        { selector: 'node', style: { 'content': 'data(label)', 'background-color': '#ffe066', 'border-width': 2, 'border-color': '#888', 'font-size': '16px', 'width': 70, 'height': 35 } },
                        { selector: 'edge', style: { 'width': 3, 'line-color': '#ccc', 'target-arrow-color': '#ccc', 'target-arrow-shape': 'triangle' } }
                    ],
                    layout: { name: 'breadthfirst', directed: true, padding: 10 }
                });
            });
    </script>
</body>

</html>